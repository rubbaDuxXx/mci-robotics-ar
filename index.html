<!DOCTYPE html>
<html>
  <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
  <!-- we import arjs version without NFT but with marker + location based support -->
  <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/paho-mqtt/1.0.1/mqttws31.min.js" type="text/javascript"></script>
  <script src=https://rawgit.com/rdub80/aframe-gui/master/dist/aframe-gui.min.js type="text/javascript"></script>

  <body style="margin : 0px; overflow: hidden;">
    <a-scene embedded arjs>
      <a-assets>
        <a-mixin
          id="marker"
          geometry="primitive: plane; width: 0.02; height: 0.02"
          material="color: red"
        ></a-mixin>
        <a-assets>
          <img id="mci-logo" src="./assets/img/mci_logo.png">
        </a-assets>
      </a-assets>

      <!-- handle hiro marker -->
		<a-marker preset='hiro'>
    <a-plane position="0 0 0" rotation="-90 0 0" width="2" height="2" color="#184787">
      <a-image position="0 1 0.1"src="#mci-logo" width="2"></a-image>
      <a-entity position="0 0 0.1"
                text="width: 2; color: white; value: Lorem ipsum dolor sit amet, consectetur adipiscing elit. Ut enim ad minim veniam">
      </a-entity>
    </a-plane>
        </a-marker>
        

      <a-entity camera></a-entity>
    </a-scene>
  <script>
    // Create a client instance
  client = new Paho.MQTT.Client("hairdresser.cloudmqtt.com", 35499, "clientId1fjndsalisafnas");
  
  // set callback handlers
  client.onConnectionLost = onConnectionLost;
  client.onMessageArrived = onMessageArrived;
  
  // connect the client
  client.connect({onSuccess:onConnect,useSSL:true,userName:"cptzbkfu",password:"6i-90zLrnYI-"});
  
  
  // called when the client connects
  function onConnect() {
    // Once a connection has been made, make a subscription and send a message.
    console.log("onConnect");
    //client.subscribe("World");
    fi = document.querySelector(".frequency-input");
    let myObj = { name: "MQTT", x_freq: fi.value };
    console.log(myObj);
    message = new Paho.MQTT.Message(JSON.stringify(myObj));
    message.destinationName = "maqiatto@mytom.at/test";
    client.send(message);
  }
  
  // called when the client loses its connection
  function onConnectionLost(responseObject) {
    if (responseObject.errorCode !== 0) {
      console.log("onConnectionLost:"+responseObject.errorMessage);
    }
  }
  
  // called when a message arrives
  function onMessageArrived(message) {
    console.log("onMessageArrived:"+message.payloadString);
  }
    </script>
    <script>
      window.onload = function () {
        document
          .querySelector(".say-hi-button")
          .addEventListener("click", function () {
            // here you can change also a-scene or a-entity properties, like
            // changing your 3D model source, size, position and so on
            // or you can just open links, trigger actions...
            alert("Hi there!");
          });
      };
    </script>
  </body>
</html>