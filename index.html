<!DOCTYPE html>
<html>
  <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
  <!-- we import arjs version without NFT but with marker + location based support -->
  <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/paho-mqtt/1.0.1/mqttws31.min.js" type="text/javascript"></script>
  <script src=https://rawgit.com/rdub80/aframe-gui/master/dist/aframe-gui.min.js type="text/javascript"></script>

  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    </head>

  <body style="margin : 0px; overflow: hidden;">
    <a-scene arjs vr-mode-ui="enabled: true" renderer="antialias: true; logarithmicDepthBuffer:false" id="arscene" onclick="openFullscreen();">
      <a-assets>
        <a-mixin
          id="marker"
          geometry="primitive: plane; width: 0.02; height: 0.02"
          material="color: red"
        ></a-mixin>
        <a-assets>
          <img id="mci-logo" src="./assets/img/mci_logo.png">
          <img id="stewart-platform" src="./assets/img/stewart_platform.jpg">
        </a-assets>
      </a-assets>

      <!-- handle hiro marker -->
		<a-marker type="pattern" url="./patterns/pattern-qrcode.patt">
    <a-plane position="0 0 0" rotation="-90 0 0" width="2.1" height="2.1" color="#184787">

      <a-image position="0 1.6 0.1"src="#mci-logo" width="2.1" height=1></a-image>
      <a-plane position="0 1.08 0" width="2.1" height="0.06" color="#D79025"></a-plane>
      <a-entity position="-1 1 0.1"
                text="baseline: top; anchor: left; width: 1.5; color: white; value: A parallel manipulator is a multi-degree-of-freedom (DoF) mechanical system that has at least two separate kinematic chains between the end-effector and the base. The base is often called the base platform or the fixed platform. The end-effector is located on another platform which is often called the mobile platform or the moving platform.\n\nIn the figure on the right, you see a kinematic sketch of a widely used 6-DoF parallel manipulator called Stewart Platform (or Stewart-Gough Platform).\n\nAt this point, please read the lecture note on Parallel Manipulators:Definitions and Characteristics.">
      </a-entity>
      <a-image position="0.75 0.75 0.08"src="./assets/img/stewart_platform.jpg" width="0.5" height=0.5></a-image>
      <a-plane position="0 -1.08 0" width="2.1" height="0.06" color="#D79025"></a-plane>
    </a-plane>
        </a-marker>
        

      <a-entity camera></a-entity>
    </a-scene>
    <script>
      var elem = document.documentElement;
      window.scrollTo(0,1);
      function openFullscreen() {
  if (elem.requestFullscreen) {
    elem.requestFullscreen();
  } else if (elem.webkitRequestFullscreen) { /* Safari */
    elem.webkitRequestFullscreen();
  } else if (elem.msRequestFullscreen) { /* IE11 */
    elem.msRequestFullscreen();
  }
}
    </script>
  <script>
    // Create a client instance
  client = new Paho.MQTT.Client("hairdresser.cloudmqtt.com", 35499, "clientId1fjndsalisafnas");
  
  // set callback handlers
  client.onConnectionLost = onConnectionLost;
  client.onMessageArrived = onMessageArrived;
  
  // connect the client
  client.connect({onSuccess:onConnect,useSSL:true,userName:"cptzbkfu",password:"6i-90zLrnYI-"});
  
  
  // called when the client connects
  function onConnect() {
    // Once a connection has been made, make a subscription and send a message.
    console.log("onConnect");
    //client.subscribe("World");
    fi = document.querySelector(".frequency-input");
    let myObj = { name: "MQTT", x_freq: fi.value };
    console.log(myObj);
    message = new Paho.MQTT.Message(JSON.stringify(myObj));
    message.destinationName = "maqiatto@mytom.at/test";
    client.send(message);
  }
  
  // called when the client loses its connection
  function onConnectionLost(responseObject) {
    if (responseObject.errorCode !== 0) {
      console.log("onConnectionLost:"+responseObject.errorMessage);
    }
  }
  
  // called when a message arrives
  function onMessageArrived(message) {
    console.log("onMessageArrived:"+message.payloadString);
  }
    </script>
    <script>
      window.onload = function () {
        document
          .querySelector(".say-hi-button")
          .addEventListener("click", function () {
            // here you can change also a-scene or a-entity properties, like
            // changing your 3D model source, size, position and so on
            // or you can just open links, trigger actions...
            alert("Hi there!");
          });
      };
    </script>
  </body>
</html>